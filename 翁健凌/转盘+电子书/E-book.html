<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
	<style type="text/css">
		*{
			margin:0;
			padding:0;
		}
		ul,li,ol{
			list-style:none;
		}
		a{
			text-decoration:none;
		}
		.box{
			width:500px;
			height:650px;
			position:relative;
			margin:0 auto;
			overflow: hidden;
			border:1px solid #333;
		}
		.book{
			width:480px;
			height:630px;	
			background:#cdda72;	
			color:#fff;			
			padding:10px;			
			font-size:16px;
			overflow: hidden;
		}
		.control{
			width:500px;
			height: 150px;
			background:#736c3b;
			position: absolute;
			bottom:0;
			left:0;
			/*display: none;*/
		}
		.control .font{
			overflow: hidden;
			padding:10px 0 10px 75px;
		}
		.font li{
			float: left;
			width:50px;
			line-height:50px;
			margin-left:50px;
			text-align:center;
			background:#333;
			color:#fff;
			border-radius:10px;
			cursor:pointer;
		}
		.control .bg-color{
			overflow: hidden;
			padding-left:80px;
			margin-top:20px;
		}
		.bg-color li{
			float:left;
			width:30px;
			height:30px;
			background:#333;
			border:2px solid #ccc;
			border-radius:50%;
			margin-left:30px;
			cursor:pointer;
		}
		.bg-color li:first-child{
			background:#6cb0af;
		}
		.bg-color li:nth-child(2){
			background:#759025;
		}
		.bg-color li:nth-child(3){
			background:#ac2716;
		}
		.bg-color li:nth-child(4){
			background:#cdda72;
		}
	</style>
</head>
<body>
	<div class="box">
		<div class="book">
			<h2>悟空传</h2>

				<p>一个声音狂笑着，</p>
				<p>他大笑着殴打神仙，大笑着毁灭一切，</p>
				<p>他知道神永远杀不完，他知道天宫无边无际。</p>
				<p>这战斗将无法终止，直到他倒下，他仍然狂笑，笑出了眼泪。</p>
				<p>这个天地，我来过，我奋战过，我深爱过，我不在乎结局。</p>

				<p>[01.]</p>
				<p>四个人走到这里，前边一片密林，又没有路了。</p>
				<p>“悟空，我饿了，给我找些吃的来。”唐僧往石头上大模大样一坐，命令道。</p>
				<p>“我正忙着，你不会自己去找？又不是没有腿。”孙悟空拄着棒子说。</p>
				<p>“你忙？忙什么？”</p>
				“你不觉得这晚霞很美吗？”孙悟空说，眼睛还望着天边，“我只有看看这个，才能每天坚持向西走下去啊。”</p>
				<p>“你可以一边看一边找啊，只要不撞到大树上就行。”</p>
				<p>“我看晚霞的时候不做任何事！”</p>
				<p>“孙悟空你不能这样，不能这样欺负秃头，你把他饿死了，我们就找不到西天，找不到西天，我们身上的诅咒永远也解除不了。”猪八戒说。</p>
				<p>“呸！什么时候轮到你这个猪头说话了？</p>”
				<p>“你说什么？你说谁是猪？！”</p>
				<p>“不是，是猪头！啊哈哈哈……”</p>
				<p>“你敢再说一遍！”猪八戒举着钉耙就要往上冲。</p>
				<p>“吵什么吵什么！老子要困觉了！要打滚远些打！”沙和尚大吼。</p>
				<p>三个恶棍怒目而视。</p>
				<p>“打吧打吧，打死一个少一个。”唐僧站起身来，“你们是大爷，我去给你们找吃的，还不行吗？最好让妖怪吃了我，那时你们就哭吧。”</p>
				<p>“快去吧，那儿有女妖精正等着你呢。”孙悟空叫道。</p>
				<p>“哼哼哼哼……”三个怪物都在冷笑。</p>
				<p>“别以为我离了你们就不行！”唐僧回头冲他们挥挥拳头，拍拍身上的尘土，又整整长袍，开始向林中走去。刚迈一步，“刺啦”——僧袍就被扯破了。</p>
				<p>“哈哈哈哈……”三个家伙笑成一团，也忘了打架。</p>

			
		</div>
		<div class="control">
				<ul class="font">
					<li>A+</li>
					<li>16</li>
					<li>A-</li>
				</ul>
				<ul class="bg-color">
					<li></li>
					<li></li>
					<li></li>
					<li></li>
					<li></li>
				</ul>
			</div>
	</div>
	<script src="../../0629/1.12.4jquery.js"></script>
	<script type="text/javascript">
		function EBook(){
			this.book = $('.book');
			this.fontElem = $('.font');
			this.bgColor = $('.bg-color');
			this.fontSizeElem = this.fontElem.children().eq(1);
			this.FS = Number(this.fontElem.children().eq(1).text());
		}

		$.extend(EBook.prototype, {
			init: function() {
				this.saveStyle();
				this.bindEvents();
			},

			bindEvents: function() {
				this.fontElem.on('click', $.proxy(this.fontSize, this));
				this.bgColor.on('click', $.proxy(this.colorChange, this));
			},

			saveStyle: function() {
				if(localStorage.fontSize){
					this.book.css('font-size', Number(localStorage.fontSize));
					this.fontSizeElem.html(Number(localStorage.fontSize));
				}
				if(localStorage.bgColor){
					this.book.css('background', localStorage.bgColor);
				}
			},

			fontSize: function(e) {
				var newFS;
				if(localStorage.fontSize){
					this.FS = Number(localStorage.fontSize);
				}
				if($(e.target).text() === 'A+'){
					// 字体变大
					newFS = ++this.FS;										
				}else if($(e.target).text() === 'A-'){
					//  字体变小
					newFS = --this.FS;					
				}else{
					// 其他不变
					return;
				}
				if(newFS >= 25){
					newFS = 25;
				}
				if(newFS <= 9){
					newFS = 9;
				}
				localStorage.fontSize = newFS;
				this.book.css('font-size',newFS);
				this.fontSizeElem.html(newFS);
			},

			colorChange: function(e) {
				if(e.target.nodeName === 'LI'){
					var color = $(e.target).css('background');
				}else{
					return;
				}
				this.book.css('background',color);
				localStorage.bgColor = color;
			}
		})

		var page = new EBook();
		page.init();

	</script>
</body>
</html>